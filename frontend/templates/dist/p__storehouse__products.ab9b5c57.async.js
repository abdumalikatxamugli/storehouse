(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[165],{5966:function(pe,$,e){"use strict";var y=e(67294),T=e(73728),B=["fieldProps","proFieldProps"],i=["fieldProps","proFieldProps"];function S(){return S=Object.assign||function(l){for(var t=1;t<arguments.length;t++){var P=arguments[t];for(var h in P)Object.prototype.hasOwnProperty.call(P,h)&&(l[h]=P[h])}return l},S.apply(this,arguments)}function w(l,t){if(l==null)return{};var P=g(l,t),h,j;if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(l);for(j=0;j<U.length;j++)h=U[j],!(t.indexOf(h)>=0)&&(!Object.prototype.propertyIsEnumerable.call(l,h)||(P[h]=l[h]))}return P}function g(l,t){if(l==null)return{};var P={},h=Object.keys(l),j,U;for(U=0;U<h.length;U++)j=h[U],!(t.indexOf(j)>=0)&&(P[j]=l[j]);return P}var p="text",Z=function(t){var P=t.fieldProps,h=t.proFieldProps,j=w(t,B);return y.createElement(T.Z,S({mode:"edit",valueType:p,fieldProps:P,filedConfig:{valueType:p},proFieldProps:h},j))},f=function(t){var P=t.fieldProps,h=t.proFieldProps,j=w(t,i);return y.createElement(T.Z,S({mode:"edit",valueType:"password",fieldProps:P,proFieldProps:h,filedConfig:{valueType:p}},j))},d=Z;d.Password=f,d.displayName="ProFormComponent",$.Z=d},90672:function(pe,$,e){"use strict";var y=e(67294),T=e(73728),B=["fieldProps","proFieldProps"];function i(){return i=Object.assign||function(p){for(var Z=1;Z<arguments.length;Z++){var f=arguments[Z];for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(p[d]=f[d])}return p},i.apply(this,arguments)}function S(p,Z){if(p==null)return{};var f=w(p,Z),d,l;if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(p);for(l=0;l<t.length;l++)d=t[l],!(Z.indexOf(d)>=0)&&(!Object.prototype.propertyIsEnumerable.call(p,d)||(f[d]=p[d]))}return f}function w(p,Z){if(p==null)return{};var f={},d=Object.keys(p),l,t;for(t=0;t<d.length;t++)l=d[t],!(Z.indexOf(l)>=0)&&(f[l]=p[l]);return f}var g=function(Z,f){var d=Z.fieldProps,l=Z.proFieldProps,t=S(Z,B);return y.createElement(T.Z,i({ref:f,mode:"edit",valueType:"textarea",fieldProps:d,proFieldProps:l},t))};$.Z=y.forwardRef(g)},50461:function(pe,$,e){"use strict";var y=e(11849),T=e(43358),B=e(90290),i=e(20228),S=e(11382),w=e(49111),g=e(19650),p=e(71153),Z=e(60331),f=e(2824),d=e(93224),l=e(67294),t=e(96486),P=e.n(t),h=e(85893),j=function(O){var _=O.fetchOptions,K=O.debounceTimeout,re=K===void 0?800:K,H=O.label,J=H===void 0?"":H,A=(0,d.Z)(O,["fetchOptions","debounceTimeout","label"]),te=l.useState(!1),N=(0,f.Z)(te,2),le=N[0],I=N[1],L=l.useState([]),F=(0,f.Z)(L,2),n=F[0],G=F[1],V=l.useRef(0),Q=l.useMemo(function(){var ae=function(fe){V.current+=1;var q=V.current;G([]),I(!0),_(fe).then(function(r){q===V.current&&(G(r),I(!1))})};return P().debounce(ae,re)},[_,re]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(g.Z,{children:[J&&(0,h.jsx)("div",{className:"ant-col ant-form-item-label",children:(0,h.jsx)("label",{className:A!=null&&A.required?"ant-form-item-required":"",title:"Description",children:J})}),(0,h.jsx)(Z.Z,{color:"blue",children:P().get(A,"placeholder")})]}),(0,h.jsx)(B.Z,(0,y.Z)((0,y.Z)({filterOption:!1,onSearch:Q,showSearch:!0,notFoundContent:le?(0,h.jsx)(S.Z,{size:"small"}):null},A),{},{options:n}))]})};$.Z=j},36834:function(pe,$,e){"use strict";e.r($),e.d($,{default:function(){return u}});var y=e(57338),T=e(25084),B=e(49111),i=e(19650),S=e(57663),w=e(71577),g=e(2824),p=e(11849),Z=e(34792),f=e(48086),d=e(3182),l=e(94043),t=e.n(l),P=e(8212),h=e(72504),j=e(73171),U=e(49101),O=e(67294),_=e(43581),K=e(81907),re=e(85224),H=e(23076),J=e(16514),A=e(5966),te=e(90672),N=e(96459),le=e(96486),I=e.n(le),L=e(4958),F=e(50461),n=e(85893);function G(E){return V.apply(this,arguments)}function V(){return V=(0,d.Z)(t().mark(function E(v){var b;return t().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,L.tG)({name:v});case 2:return b=o.sent,o.abrupt("return",b.data.map(function(c){return{label:c.name,value:c.id}}));case 4:case"end":return o.stop()}},E)})),V.apply(this,arguments)}function Q(E){return ae.apply(this,arguments)}function ae(){return ae=(0,d.Z)(t().mark(function E(v){var b;return t().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return b=f.default.loading("Updating"),o.prev=1,o.next=4,(0,L.nM)({data:v});case 4:return b(),f.default.success("Product updated successfully"),o.abrupt("return",!0);case 9:return o.prev=9,o.t0=o.catch(1),console.log(o.t0),b(),f.default.error("Product update failed, please try again!"),o.abrupt("return",!1);case 15:case"end":return o.stop()}},E,null,[[1,9]])})),ae.apply(this,arguments)}var ne=function(v){var b=(0,_.YB)(),R=(0,O.useState)(""),o=(0,g.Z)(R,2),c=o[0],ie=o[1];return(0,O.useEffect)(function(){ie(I().get(v.values,"category_id",""))},[v.values]),(0,n.jsxs)(J.Z,{name:"update",title:b.formatMessage({id:"pages.searchTable.createForm.newRule",defaultMessage:"New rule"}),width:"400px",visible:v.updateModalVisible,onCancel:function(){v.onCancel()},onVisibleChange:v.handleUpdateModalVisible,onFinish:function(){var oe=(0,d.Z)(t().mark(function W(me){var de;return t().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,Q((0,p.Z)((0,p.Z)((0,p.Z)({},v.values),me),{},{category_id:c}));case 2:de=z.sent,de&&v.onSubmit();case 4:case"end":return z.stop()}},W)}));return function(W){return oe.apply(this,arguments)}}(),children:[(0,n.jsx)(A.Z,{rules:[{required:!0,message:(0,n.jsx)(_._H,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}],label:"Name",width:"lg",name:"name",initialValue:I().get(v.values,"name","")}),(0,n.jsx)(te.Z,{rules:[{required:!0,message:(0,n.jsx)(_._H,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}],label:"Description",width:"lg",name:"description",initialValue:I().get(v.values,"description","")}),(0,n.jsx)(F.Z,{value:c,required:!0,placeholder:I().get(v.values,"category",""),label:"Category",onChange:function(W){return ie(W)},fetchOptions:G,style:{width:"100%"}})]})},fe=ne,q=function(){var E=(0,d.Z)(t().mark(function v(b){var R;return t().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return R=f.default.loading("Adding new user"),c.prev=1,c.next=4,(0,L.gK)((0,p.Z)({},b));case 4:return R(),f.default.success("New user created successfully"),c.abrupt("return",!0);case 9:return c.prev=9,c.t0=c.catch(1),R(),f.default.error("Creating new user failed, please try again!"),c.abrupt("return",!1);case 14:case"end":return c.stop()}},v,null,[[1,9]])}));return function(b){return E.apply(this,arguments)}}(),r=function(){var E=(0,d.Z)(t().mark(function v(b){var R;return t().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return R=f.default.loading("Deleting"),c.prev=1,c.next=4,(0,L.Ir)(b);case 4:return R(),f.default.success("Deleted successfully and will refresh soon"),c.abrupt("return",!0);case 9:return c.prev=9,c.t0=c.catch(1),R(),f.default.error("Delete failed, please try again"),c.abrupt("return",!1);case 14:case"end":return c.stop()}},v,null,[[1,9]])}));return function(b){return E.apply(this,arguments)}}();function s(E){return m.apply(this,arguments)}function m(){return m=(0,d.Z)(t().mark(function E(v){var b;return t().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,L.tG)({name:v});case 2:return b=o.sent,o.abrupt("return",b.data.map(function(c){return{label:c.name,value:c.id}}));case 4:case"end":return o.stop()}},E)})),m.apply(this,arguments)}var a=function(){var v=(0,O.useState)(!1),b=(0,g.Z)(v,2),R=b[0],o=b[1],c=(0,O.useState)(!1),ie=(0,g.Z)(c,2),oe=ie[0],W=ie[1],me=(0,O.useState)(!1),de=(0,g.Z)(me,2),ge=de[0],z=de[1],k=(0,O.useRef)(),Ze=(0,O.useState)(),_e=(0,g.Z)(Ze,2),x=_e[0],ce=_e[1],Oe=(0,O.useState)([]),ye=(0,g.Z)(Oe,2),se=ye[0],Pe=ye[1],Ce=(0,O.useState)(""),be=(0,g.Z)(Ce,2),Te=be[0],Me=be[1],je=(0,_.YB)(),Ee=[{title:(0,n.jsx)(_._H,{id:"pages.searchTable.pk",defaultMessage:"#"}),dataIndex:"id",tip:"The rule name is the unique key",render:function(C,M){return C}},{title:(0,n.jsx)(_._H,{id:"pages.searchTable.name",defaultMessage:"Name"}),dataIndex:"name",tip:"The rule name is the unique key"},{title:(0,n.jsx)(_._H,{id:"pages.searchTable.category",defaultMessage:"Category"}),dataIndex:"category",tip:"The rule name is the unique key"},{title:(0,n.jsx)(_._H,{id:"pages.searchTable.description",defaultMessage:"Description"}),dataIndex:"description",tip:"The rule name is the unique key",hideInTable:!0},{title:(0,n.jsx)(_._H,{id:"pages.searchTable.date_joined",defaultMessage:"#"}),dataIndex:"created_at",valueType:"dateTime",tip:"The rule name is the unique key",hideInTable:!0},{title:(0,n.jsx)(_._H,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(C,M){return(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(w.Z,{type:"primary",onClick:function(){W(!0),ce(M)},children:(0,n.jsx)(P.Z,{})},"control"),(0,n.jsx)(w.Z,{type:"dashed",onClick:function(){ce(M),z(!0)},children:(0,n.jsx)(h.Z,{})}),(0,n.jsx)(w.Z,{type:"primary",danger:!0,onClick:(0,d.Z)(t().mark(function ee(){var Y,X,he,ve;return t().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(Y=window.confirm("Do you really to remove this item?"),Y!=!0){ue.next=6;break}return ue.next=4,r(M.id);case 4:X=ue.sent,X&&k.current&&((he=k.current)===null||he===void 0||(ve=he.reloadAndRest)===null||ve===void 0||ve.call(he));case 6:case"end":return ue.stop()}},ee)})),children:(0,n.jsx)(j.Z,{})})]})}}];return(0,n.jsxs)(K.ZP,{children:[(0,n.jsx)(H.ZP,{headerTitle:je.formatMessage({id:"pages.searchTable.products_form",defaultMessage:"Products form"}),actionRef:k,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,n.jsxs)(w.Z,{type:"primary",onClick:function(){o(!0)},children:[(0,n.jsx)(U.Z,{})," ",(0,n.jsx)(_._H,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")]},request:L.Dg,columns:Ee,rowSelection:{onChange:function(C,M){Pe(M)}}}),(se==null?void 0:se.length)>0&&(0,n.jsxs)(re.Z,{extra:(0,n.jsxs)("div",{children:[(0,n.jsx)(_._H,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,n.jsx)("a",{style:{fontWeight:600},children:se.length})," ",(0,n.jsx)(_._H,{id:"pages.searchTable.item",defaultMessage:"\u9879"}),"\xA0\xA0",(0,n.jsxs)("span",{children:[(0,n.jsx)(_._H,{id:"pages.searchTable.totalServiceCalls",defaultMessage:"Total number of service calls"})," ",se.reduce(function(D,C){return D+C.callNo},0)," ",(0,n.jsx)(_._H,{id:"pages.searchTable.tenThousand",defaultMessage:"\u4E07"})]})]}),children:[(0,n.jsx)(w.Z,{onClick:(0,d.Z)(t().mark(function D(){var C,M;return t().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,r(se);case 2:Pe([]),(C=k.current)===null||C===void 0||(M=C.reloadAndRest)===null||M===void 0||M.call(C);case 4:case"end":return Y.stop()}},D)})),children:(0,n.jsx)(_._H,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})}),(0,n.jsx)(w.Z,{type:"primary",children:(0,n.jsx)(_._H,{id:"pages.searchTable.batchApproval",defaultMessage:"Batch approval"})})]}),(0,n.jsxs)(J.Z,{name:"create",title:je.formatMessage({id:"pages.searchTable.createForm.newRule",defaultMessage:"New rule"}),width:"400px",visible:R,onVisibleChange:o,onFinish:function(){var D=(0,d.Z)(t().mark(function C(M){var ee;return t().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,q((0,p.Z)((0,p.Z)({},M),{},{category_id:Te}));case 2:ee=X.sent,ee&&(o(!1),k.current&&k.current.reload());case 4:case"end":return X.stop()}},C)}));return function(C){return D.apply(this,arguments)}}(),children:[(0,n.jsx)(A.Z,{rules:[{required:!0,message:(0,n.jsx)(_._H,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}],label:"Name",width:"lg",name:"name"}),(0,n.jsx)(te.Z,{rules:[{required:!0,message:(0,n.jsx)(_._H,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}],label:"Description",width:"lg",name:"description"}),(0,n.jsx)(F.Z,{value:Te,required:!0,onChange:function(C){return Me(C)},placeholder:(0,n.jsx)(_._H,{id:"pages.searchTable.selectDeliver",defaultMessage:"Rule name is required"}),label:"Category",fetchOptions:s,style:{width:"100%"}})]}),(0,n.jsx)(fe,{onSubmit:function(){W(!1),ce(void 0),k.current&&k.current.reload()},onCancel:function(){W(!1),ce(void 0)},handleUpdateModalVisible:W,updateModalVisible:oe,values:x||{}}),(0,n.jsx)(T.Z,{width:600,visible:ge,onClose:function(){ce(void 0),z(!1)},closable:!1,children:(x==null?void 0:x.name)&&(0,n.jsx)(N.Z,{column:2,title:x==null?void 0:x.name,request:(0,d.Z)(t().mark(function D(){return t().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",{data:x||{}});case 1:case"end":return M.stop()}},D)})),params:{id:x==null?void 0:x.id},columns:Ee})})]})},u=a},4958:function(pe,$,e){"use strict";e.d($,{tG:function(){return Z},i8:function(){return d},yr:function(){return t},uu:function(){return h},Dg:function(){return U},gK:function(){return _},nM:function(){return re},Ir:function(){return J},Nx:function(){return te},jX:function(){return le},$G:function(){return L},wz:function(){return n}});var y=e(11849),T=e(3182),B=e(94043),i=e.n(B),S=e(11238),w=function(){var s=(0,S.l7)({prefix:"/",timeout:1e3});return s},g=(0,S.l7)({prefix:"/",timeout:1e3}),p=w();p.interceptors.response.use(function(){var r=(0,T.Z)(i().mark(function s(m){var a;return i().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,m.clone().json();case 2:return a=E.sent,E.abrupt("return",{current:a.current,data:a.data.map(function(v,b){return(0,y.Z)((0,y.Z)({},v),{},{key:b})}),pageSize:a.pageSize,success:a.success,total:a.total});case 4:case"end":return E.stop()}},s)}));return function(s){return r.apply(this,arguments)}}(),{global:!1});function Z(r,s){return f.apply(this,arguments)}function f(){return f=(0,T.Z)(i().mark(function r(s,m){return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",p("/categories/",(0,y.Z)({method:"GET",params:(0,y.Z)({},s)},m||{})));case 1:case"end":return u.stop()}},r)})),f.apply(this,arguments)}function d(r,s){return l.apply(this,arguments)}function l(){return l=(0,T.Z)(i().mark(function r(s,m){return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",g("/categories/",(0,y.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:s},m||{})));case 1:case"end":return u.stop()}},r)})),l.apply(this,arguments)}function t(r){return P.apply(this,arguments)}function P(){return P=(0,T.Z)(i().mark(function r(s){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",g("/categories/".concat(s.data.id,"/"),(0,y.Z)({method:"PATCH"},s||{})));case 1:case"end":return a.stop()}},r)})),P.apply(this,arguments)}function h(r){return j.apply(this,arguments)}function j(){return j=(0,T.Z)(i().mark(function r(s){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",g("/categories/".concat(s,"/"),{method:"DELETE"}));case 1:case"end":return a.stop()}},r)})),j.apply(this,arguments)}function U(r,s){return O.apply(this,arguments)}function O(){return O=(0,T.Z)(i().mark(function r(s,m){return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",p("/products/",(0,y.Z)({method:"GET",params:(0,y.Z)({},s)},m||{})));case 1:case"end":return u.stop()}},r)})),O.apply(this,arguments)}function _(r,s){return K.apply(this,arguments)}function K(){return K=(0,T.Z)(i().mark(function r(s,m){return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",g("/products/",(0,y.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:s},m||{})));case 1:case"end":return u.stop()}},r)})),K.apply(this,arguments)}function re(r){return H.apply(this,arguments)}function H(){return H=(0,T.Z)(i().mark(function r(s){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",g("/products/".concat(s.data.id,"/"),(0,y.Z)({method:"PATCH"},s||{})));case 1:case"end":return a.stop()}},r)})),H.apply(this,arguments)}function J(r){return A.apply(this,arguments)}function A(){return A=(0,T.Z)(i().mark(function r(s){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",g("/products/".concat(s,"/"),{method:"DELETE"}));case 1:case"end":return a.stop()}},r)})),A.apply(this,arguments)}function te(r,s){return N.apply(this,arguments)}function N(){return N=(0,T.Z)(i().mark(function r(s,m){return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",p("/items/",(0,y.Z)({method:"GET",params:(0,y.Z)({},s)},m||{})));case 1:case"end":return u.stop()}},r)})),N.apply(this,arguments)}function le(r,s){return I.apply(this,arguments)}function I(){return I=(0,T.Z)(i().mark(function r(s,m){return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",g("/items/",(0,y.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:s},m||{})));case 1:case"end":return u.stop()}},r)})),I.apply(this,arguments)}function L(r){return F.apply(this,arguments)}function F(){return F=(0,T.Z)(i().mark(function r(s){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",g("/items/".concat(s.data.id,"/"),(0,y.Z)({method:"PATCH"},s||{})));case 1:case"end":return a.stop()}},r)})),F.apply(this,arguments)}function n(r){return G.apply(this,arguments)}function G(){return G=(0,T.Z)(i().mark(function r(s){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",g("/items/".concat(s,"/"),{method:"DELETE"}));case 1:case"end":return a.stop()}},r)})),G.apply(this,arguments)}function V(r,s){return Q.apply(this,arguments)}function Q(){return Q=_asyncToGenerator(_regeneratorRuntime.mark(function r(s,m){return _regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",p("/users",_objectSpread({method:"GET",params:_objectSpread({},s)},m||{})));case 1:case"end":return u.stop()}},r)})),Q.apply(this,arguments)}function ae(r,s){return ne.apply(this,arguments)}function ne(){return ne=_asyncToGenerator(_regeneratorRuntime.mark(function r(s,m){return _regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",g("/users/",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:s},m||{})));case 1:case"end":return u.stop()}},r)})),ne.apply(this,arguments)}function fe(r){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime.mark(function r(s){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",g("/users/".concat(s.data.pk,"/"),_objectSpread({method:"PUT"},s||{})));case 1:case"end":return a.stop()}},r)})),q.apply(this,arguments)}}}]);
