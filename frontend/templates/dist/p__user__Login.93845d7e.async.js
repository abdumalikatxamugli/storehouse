(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{5966:function(Y,z,s){"use strict";var X=s(67294),N=s(73728),ne=["fieldProps","proFieldProps"],A=["fieldProps","proFieldProps"];function C(){return C=Object.assign||function(d){for(var o=1;o<arguments.length;o++){var b=arguments[o];for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}return d},C.apply(this,arguments)}function E(d,o){if(d==null)return{};var b=R(d,o),p,h;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(d);for(h=0;h<T.length;h++)p=T[h],!(o.indexOf(p)>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,p)||(b[p]=d[p]))}return b}function R(d,o){if(d==null)return{};var b={},p=Object.keys(d),h,T;for(T=0;T<p.length;T++)h=p[T],!(o.indexOf(h)>=0)&&(b[h]=d[h]);return b}var H="text",J=function(o){var b=o.fieldProps,p=o.proFieldProps,h=E(o,ne);return X.createElement(N.Z,C({mode:"edit",valueType:H,fieldProps:b,filedConfig:{valueType:H},proFieldProps:p},h))},Q=function(o){var b=o.fieldProps,p=o.proFieldProps,h=E(o,A);return X.createElement(N.Z,C({mode:"edit",valueType:"password",fieldProps:b,proFieldProps:p,filedConfig:{valueType:H}},h))},M=J;M.Password=Q,M.displayName="ProFormComponent",z.Z=M},34687:function(Y){Y.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},18245:function(Y,z,s){"use strict";s.r(z),s.d(z,{default:function(){return qe}});var X=s(18106),N=s(45934),ne=s(34792),A=s(48086),C=s(11849),E=s(3182),R=s(2824),H=s(17462),J=s(76772),Q=s(94043),M=s.n(Q),d=s(28991),o=s(67294),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},p=b,h=s(27029),T=function(t,r){return o.createElement(h.Z,(0,d.Z)((0,d.Z)({},t),{},{ref:r,icon:p}))};T.displayName="LockOutlined";var ae=o.forwardRef(T),me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},he=me,se=function(t,r){return o.createElement(h.Z,(0,d.Z)((0,d.Z)({},t),{},{ref:r,icon:he}))};se.displayName="MobileOutlined";var ye=o.forwardRef(se),be=s(89366),_e=s(9715),Pe=s(86585),er=s(57663),Oe=s(71577),rr=s(47673),je=s(4107),ie=s(64893),xe=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"];function U(){return U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U.apply(this,arguments)}function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oe(Object(r),!0).forEach(function(n){Fe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e,t,r,n,a,l,O){try{var S=e[l](O),j=S.value}catch(L){r(L);return}S.done?t(j):Promise.resolve(j).then(n,a)}function ce(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var l=e.apply(t,r);function O(j){ue(l,n,a,O,S,"next",j)}function S(j){ue(l,n,a,O,S,"throw",j)}O(void 0)})}}function Me(e,t){if(e==null)return{};var r=Se(e,t),n,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function Se(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function q(e,t){return Te(e)||Ze(e,t)||Ce(e,t)||we()}function we(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ce(e,t){if(!!e){if(typeof e=="string")return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}}function fe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ze(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,l=!1,O,S;try{for(r=r.call(e);!(a=(O=r.next()).done)&&(n.push(O.value),!(t&&n.length===t));a=!0);}catch(j){l=!0,S=j}finally{try{!a&&r.return!=null&&r.return()}finally{if(l)throw S}}return n}}function Te(e){if(Array.isArray(e))return e}var Ee=o.forwardRef(function(e,t){var r=(0,o.useState)(e.countDown||60),n=q(r,2),a=n[0],l=n[1],O=(0,o.useState)(!1),S=q(O,2),j=S[0],L=S[1],G=(0,o.useState)(),I=q(G,2),re=I[0],B=I[1],k=e.rules,ve=e.name,y=e.phoneName,D=e.fieldProps,$=e.captchaTextRender,V=$===void 0?function(u,f){return u?"".concat(f," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:$,K=e.captchaProps,Z=Me(e,xe),v=function(){var u=ce(regeneratorRuntime.mark(function f(m){return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,B(!0),g.next=4,Z.onGetCaptcha(m);case 4:B(!1),L(!0),g.next=13;break;case 8:g.prev=8,g.t0=g.catch(0),L(!1),B(!1),console.log(g.t0);case 13:case"end":return g.stop()}},f,null,[[0,8]])}));return function(m){return u.apply(this,arguments)}}();return(0,o.useEffect)(function(){var u=0,f=e.countDown;return j&&(u=window.setInterval(function(){l(function(m){return m<=1?(L(!1),clearInterval(u),f||60):m-1})},1e3)),function(){return clearInterval(u)}},[j]),o.createElement(Pe.Z.Item,{noStyle:!0,shouldUpdate:!0},function(u){var f=u.getFieldValue,m=u.validateFields;return o.createElement("div",{style:le(le({},D==null?void 0:D.style),{},{display:"flex",alignItems:"center"}),ref:t},o.createElement(je.Z,U({},D,{style:{flex:1,transition:"width .3s",marginRight:8}})),o.createElement(Oe.Z,U({style:{display:"block"},disabled:j,loading:re},K,{onClick:ce(regeneratorRuntime.mark(function c(){var g;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(x.prev=0,!y){x.next=9;break}return x.next=4,m([y].flat(1));case 4:return g=f([y].flat(1)),x.next=7,v(g);case 7:x.next=11;break;case 9:return x.next=11,v("");case 11:x.next=16;break;case 13:x.prev=13,x.t0=x.catch(0),console.log(x.t0);case 16:case"end":return x.stop()}},c,null,[[0,13]])}))}),V(j,a)))})}),Le=(0,ie.Z)(Ee),tr=s(63185),Ie=s(9676),Be=s(73728),De=s(22270),Ne=["options","fieldProps","proFieldProps","valueEnum"];function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W.apply(this,arguments)}function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?de(Object(r),!0).forEach(function(n){Re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ke(e,t){if(e==null)return{};var r=ze(e,t),n,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function ze(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var He=o.forwardRef(function(e,t){var r=e.options,n=e.fieldProps,a=e.proFieldProps,l=e.valueEnum,O=ke(e,Ne);return o.createElement(Be.Z,W({ref:t,valueType:"checkbox",mode:"edit",valueEnum:(0,De.h)(l,void 0),fieldProps:Ae({options:r},n),proFieldProps:a},O))}),Ue=o.forwardRef(function(e,t){var r=e.fieldProps,n=e.children;return o.createElement(Ie.Z,W({ref:t},r),n)}),We=(0,ie.Z)(Ue,{valuePropName:"checked"}),pe=We;pe.Group=He;var Ge=pe,$e=s(15196),_=s(5966),P=s(43581),Ve=s(73727),Ke=s(92002),Ye=s(5029);function Xe(e,t){return ee.apply(this,arguments)}function ee(){return ee=(0,E.Z)(M().mark(function e(t,r){return M().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,P.WY)("/api/login/captcha",(0,C.Z)({method:"GET",params:(0,C.Z)({},t)},r||{})));case 1:case"end":return a.stop()}},e)})),ee.apply(this,arguments)}var Je=s(34687),w=s.n(Je),i=s(85893),ge=function(t){var r=t.content;return(0,i.jsx)(J.Z,{style:{marginBottom:24},message:r,type:"error",showIcon:!0})},Qe=function(){var t=(0,o.useState)(!1),r=(0,R.Z)(t,2),n=r[0],a=r[1],l=(0,o.useState)({}),O=(0,R.Z)(l,2),S=O[0],j=O[1],L=(0,o.useState)("account"),G=(0,R.Z)(L,2),I=G[0],re=G[1],B=(0,P.tT)("@@initialState"),k=B.initialState,ve=B.setInitialState,y=(0,P.YB)(),D=function(){var Z=(0,E.Z)(M().mark(function v(){var u,f;return M().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,k==null||(u=k.fetchUserInfo)===null||u===void 0?void 0:u.call(k);case 2:if(f=c.sent,!f){c.next=6;break}return c.next=6,ve(function(g){return(0,C.Z)((0,C.Z)({},g),{},{currentUser:f})});case 6:case"end":return c.stop()}},v)}));return function(){return Z.apply(this,arguments)}}(),$=function(){var Z=(0,E.Z)(M().mark(function v(u){var f,m,c,g,te;return M().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return a(!0),F.prev=1,F.next=4,(0,Ye.x4)((0,C.Z)((0,C.Z)({},u),{},{type:I}));case 4:if(f=F.sent,f.status!=="ok"){F.next=16;break}return m=y.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),A.default.success(m),F.next=10,D();case 10:if(P.m8){F.next=12;break}return F.abrupt("return");case 12:return c=P.m8.location.query,g=c.redirect,P.m8.push(g||"/"),F.abrupt("return");case 16:j(f),F.next=23;break;case 19:F.prev=19,F.t0=F.catch(1),te=y.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),A.default.error(te);case 23:a(!1);case 24:case"end":return F.stop()}},v,null,[[1,19]])}));return function(u){return Z.apply(this,arguments)}}(),V=S.status,K=S.type;return(0,i.jsxs)("div",{className:w().container,children:[(0,i.jsx)("div",{className:w().lang,"data-lang":!0,children:P.pD&&(0,i.jsx)(P.pD,{})}),(0,i.jsxs)("div",{className:w().content,children:[(0,i.jsxs)("div",{className:w().top,children:[(0,i.jsx)("div",{className:w().header,children:(0,i.jsxs)(Ve.rU,{to:"/",children:[(0,i.jsx)("img",{alt:"logo",className:w().logo,src:"/logo.svg"}),(0,i.jsx)("span",{className:w().title,children:"Ant Design"})]})}),(0,i.jsx)("div",{className:w().desc,children:y.formatMessage({id:"pages.layouts.userLayout.title"})})]}),(0,i.jsx)("div",{className:w().main,children:(0,i.jsxs)($e.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:y.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(v,u){return u.pop()},submitButtonProps:{loading:n,size:"large",style:{width:"100%"}}},onFinish:function(){var Z=(0,E.Z)(M().mark(function v(u){return M().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,$(u);case 2:case"end":return m.stop()}},v)}));return function(v){return Z.apply(this,arguments)}}(),children:[(0,i.jsx)(N.Z,{activeKey:I,onChange:re,children:(0,i.jsx)(N.Z.TabPane,{tab:y.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account")}),V==="error"&&K==="account"&&(0,i.jsx)(ge,{content:y.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),I==="account"&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.Z,{name:"username",fieldProps:{size:"large",prefix:(0,i.jsx)(be.Z,{className:w().prefixIcon})},placeholder:y.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,i.jsx)(P._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,i.jsx)(_.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,i.jsx)(ae,{className:w().prefixIcon})},placeholder:y.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,i.jsx)(P._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),V==="error"&&K==="mobile"&&(0,i.jsx)(ge,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),I==="mobile"&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.Z,{fieldProps:{size:"large",prefix:(0,i.jsx)(ye,{className:w().prefixIcon})},name:"mobile",placeholder:y.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,i.jsx)(P._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,i.jsx)(P._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,i.jsx)(Le,{fieldProps:{size:"large",prefix:(0,i.jsx)(ae,{className:w().prefixIcon})},captchaProps:{size:"large"},placeholder:y.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(v,u){return v?"".concat(u," ").concat(y.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):y.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,i.jsx)(P._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var Z=(0,E.Z)(M().mark(function v(u){var f;return M().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Xe({phone:u});case 2:if(f=c.sent,f!==!1){c.next=5;break}return c.abrupt("return");case 5:A.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return c.stop()}},v)}));return function(v){return Z.apply(this,arguments)}}()})]}),(0,i.jsxs)("div",{style:{marginBottom:24},children:[(0,i.jsx)(Ge,{noStyle:!0,name:"autoLogin",children:(0,i.jsx)(P._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,i.jsx)("a",{style:{float:"right"},children:(0,i.jsx)(P._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})})]}),(0,i.jsx)(Ke.Z,{})]})},qe=Qe}}]);
